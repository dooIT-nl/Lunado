<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="view_order_form_inherit" model="ir.ui.view">
        <field name="name">sale.order.inherited</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
        <xpath expr="." position="inside">     
                <link rel="stylesheet" href="dmmodule/static/src/css/deliverymatch.css"/>
        </xpath>   

            <xpath expr="//field[@name='tax_totals']" position="after">
                    <group class="oe_subtotal_footer oe_right" colspan="2">
                        <field name="total_shipment_price"/>
                    </group>
            </xpath>

            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="client_order_ref"/>
            </xpath>

            <notebook position="inside">
                <page string="DeliveryMatch | Shipping options" name="DeliveryMatch">
                    <group string="Execution" class="col-12 col-lg-12" attrs="{'invisible': [('extend_carrier_to_delivery', '=', True), ('state', '=', 'sale')]}">
                        
                        <div class="dm-row" style="width:600px !important;">

                            <button class="dm-orange dm-btn" name="show_shipping_options"
                                string="Request shipping options" type="object" />

                            <div attrs="{'invisible': [('delivery_option_selected', '=', False)]}">
                                <button
                                    class="dm-green dm-btn"
                                    name="book_sale_order"
                                    string="Book order to carrier"
                                    type="object"
                                    attrs="{'invisible': [('hide_carrier_btn', '=', True)]}"
                                />
                                <button
                                    class="dm-blue dm-btn"
                                    name="book_sale_order_to_hub"
                                    string="Send order to warehouse"
                                    type="object"
                                    attrs="{'invisible': [('hide_hub_btn', '=', True)]}" />
                            </div>
                        </div>

                        <field name="hide_hub_btn" invisible="True" />
                        <field name="hide_carrier_btn" invisible="True" />
                        <field name="delivery_option_selected" invisible="True"/>
                        <field name="show_packages" invisible="True"/>
                    </group>

                    <group string="Selected shipping option">
                        <field name="dm_carrierName" readonly="True" />
                            <field name="dm_serviceLevelName" readonly="True" />
                            <field name="dm_serviceLevelDescription" readonly="True" />
                            <field name="dm_pickup_date" readonly="True"/>
                            <field name="dm_deliveryDate" readonly="True"/>
                            <field name="dm_price" readonly="True" string="Sell Price"/>
                            <field name="dm_buyPrice" readonly="True"/>
                            <field name="shipmentURL" string="Show in DeliveryMatch" widget="url" readonly="True" />
                            <field name="dm_shipment_booked" invisible="True" />
                            <field name="dm_carrier_id" invisible="1" />
                            <field name="service_level_id" invisible="1" />
                            <field name="extend_carrier_to_delivery" invisible="1" />
                    </group>

                    <group string="Calculated Packages" attrs="{'invisible': [('show_packages', '=', False)]}">
                        <field name="packages" string="" context="{'tree_view_ref' : 'dmmodule.package_table'}" readonly="1"/>
                    </group>

                    <group string="Tracking &amp; Shipping labels" attrs="{'invisible': [('shipment_label_attachment', '=', False)]}">
                        <field name="tracking_urls" readonly="True" />
                        <field name="shipment_label_attachment" widget="pdf_viewer" readonly="True" attrs="{'invisible': [('shipment_label_attachment', '=', False)]}"/>
                    </group>

                </page>
            </notebook>
        </field>
    </record>
</odoo>